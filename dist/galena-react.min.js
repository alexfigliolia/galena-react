!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("object-assign")):"function"==typeof define&&define.amd?define(["exports","object-assign"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["galena-react"]={},t.require$$0)}(this,(function(t,e){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=r(e);function o(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var u,i={exports:{}},s={};function a(){if(u)return s;u=1;var t=n.default,e=60103,r=60106;s.Fragment=60107,s.StrictMode=60108,s.Profiler=60114;var o=60109,i=60110,a=60112;s.Suspense=60113;var c=60115,f=60116;if("function"==typeof Symbol&&Symbol.for){var l=Symbol.for;e=l("react.element"),r=l("react.portal"),s.Fragment=l("react.fragment"),s.StrictMode=l("react.strict_mode"),s.Profiler=l("react.profiler"),o=l("react.provider"),i=l("react.context"),a=l("react.forward_ref"),s.Suspense=l("react.suspense"),c=l("react.memo"),f=l("react.lazy")}var p="function"==typeof Symbol&&Symbol.iterator;function d(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;arguments.length>r;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h={};function b(t,e,r){this.props=t,this.context=e,this.refs=h,this.updater=r||y}function v(){}function m(t,e,r){this.props=t,this.context=e,this.refs=h,this.updater=r||y}b.prototype.isReactComponent={},b.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(d(85));this.updater.enqueueSetState(this,t,e,"setState")},b.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=b.prototype;var _=m.prototype=new v;_.constructor=m,t(_,b.prototype),_.isPureReactComponent=!0;var g={current:null},S=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function x(t,r,n){var o,u={},i=null,s=null;if(null!=r)for(o in void 0!==r.ref&&(s=r.ref),void 0!==r.key&&(i=""+r.key),r)S.call(r,o)&&!w.hasOwnProperty(o)&&(u[o]=r[o]);var a=arguments.length-2;if(1===a)u.children=n;else if(a>1){for(var c=Array(a),f=0;a>f;f++)c[f]=arguments[f+2];u.children=c}if(t&&t.defaultProps)for(o in a=t.defaultProps)void 0===u[o]&&(u[o]=a[o]);return{$$typeof:e,type:t,key:i,ref:s,props:u,_owner:g.current}}function C(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var E=/\/+/g;function $(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function k(t,n,o,u,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var a=!1;if(null===t)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case e:case r:a=!0}}if(a)return i=i(a=t),t=""===u?"."+$(a,0):u,Array.isArray(i)?(o="",null!=t&&(o=t.replace(E,"$&/")+"/"),k(i,n,o,"",(function(t){return t}))):null!=i&&(C(i)&&(i=function(t,r){return{$$typeof:e,type:t.type,key:r,ref:t.ref,props:t.props,_owner:t._owner}}(i,o+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(E,"$&/")+"/")+t)),n.push(i)),1;if(a=0,u=""===u?".":u+":",Array.isArray(t))for(var c=0;t.length>c;c++){var f=u+$(s=t[c],c);a+=k(s,n,o,f,i)}else if(f=function(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=p&&t[p]||t["@@iterator"])?t:null}(t),"function"==typeof f)for(t=f.call(t),c=0;!(s=t.next()).done;)a+=k(s=s.value,n,o,f=u+$(s,c++),i);else if("object"===s)throw Error(d(31,"[object Object]"===(n=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":n));return a}function j(t,e,r){if(null==t)return t;var n=[],o=0;return k(t,n,"","",(function(t){return e.call(r,t,o++)})),n}function P(t){if(-1===t._status){var e=t._result;e=e(),t._status=0,t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}if(1===t._status)return t._result;throw t._result}var I={current:null};function R(){var t=I.current;if(null===t)throw Error(d(321));return t}var O={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:g,IsSomeRendererActing:{current:!1},assign:t};return s.Children={map:j,forEach:function(t,e,r){j(t,(function(){e.apply(this,arguments)}),r)},count:function(t){var e=0;return j(t,(function(){e++})),e},toArray:function(t){return j(t,(function(t){return t}))||[]},only:function(t){if(!C(t))throw Error(d(143));return t}},s.Component=b,s.PureComponent=m,s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,s.cloneElement=function(r,n,o){if(null==r)throw Error(d(267,r));var u=t({},r.props),i=r.key,s=r.ref,a=r._owner;if(null!=n){if(void 0!==n.ref&&(s=n.ref,a=g.current),void 0!==n.key&&(i=""+n.key),r.type&&r.type.defaultProps)var c=r.type.defaultProps;for(f in n)S.call(n,f)&&!w.hasOwnProperty(f)&&(u[f]=void 0===n[f]&&void 0!==c?c[f]:n[f])}var f=arguments.length-2;if(1===f)u.children=o;else if(f>1){c=Array(f);for(var l=0;f>l;l++)c[l]=arguments[l+2];u.children=c}return{$$typeof:e,type:r.type,key:i,ref:s,props:u,_owner:a}},s.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:i,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:t},t.Consumer=t},s.createElement=x,s.createFactory=function(t){var e=x.bind(null,t);return e.type=t,e},s.createRef=function(){return{current:null}},s.forwardRef=function(t){return{$$typeof:a,render:t}},s.isValidElement=C,s.lazy=function(t){return{$$typeof:f,_payload:{_status:-1,_result:t},_init:P}},s.memo=function(t,e){return{$$typeof:c,type:t,compare:void 0===e?null:e}},s.useCallback=function(t,e){return R().useCallback(t,e)},s.useContext=function(t,e){return R().useContext(t,e)},s.useDebugValue=function(){},s.useEffect=function(t,e){return R().useEffect(t,e)},s.useImperativeHandle=function(t,e,r){return R().useImperativeHandle(t,e,r)},s.useLayoutEffect=function(t,e){return R().useLayoutEffect(t,e)},s.useMemo=function(t,e){return R().useMemo(t,e)},s.useReducer=function(t,e,r){return R().useReducer(t,e,r)},s.useRef=function(t){return R().useRef(t)},s.useState=function(t){return R().useState(t)},s.version="17.0.2",s}!function(t){t.exports=a()}(i);var c=o(i.exports);function f(t,e){for(var r=0;e.length>r;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);e>r;r++)n[r]=t[r];return n}function d(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return p(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return t.length>n?{done:!1,value:t[n++]}:{done:!0}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var y=function(){function t(){this.incrementor=0}return t.prototype.destroy=function(){this.incrementor=0},l(t,[{key:"nextID",get:function(){return""+this.incrementor++}}]),t}(),h=function(){function t(){this.incrementor=new y,this.subscriptions=new Map}var e=t.prototype;return e.add=function(t){var e=this.incrementor.nextID;return this.subscriptions.set(e,t),e},e.remove=function(t){this.subscriptions.delete(t)},e.execute=function(t){for(var e,r=d(this.subscriptions.values());!(e=r()).done;){(0,e.value)(t)}},l(t,[{key:"size",get:function(){return this.subscriptions.size}}]),t}(),b=function(){function t(){}return t.emit=function(t,e){var r=this.subscriptions.get(t);r&&r.execute(e)},t.subscribe=function(t,e){var r=this.subscriptions.get(t)||new h,n=r.add(e);return this.subscriptions.set(t,r),n},t.unsubscribe=function(t,e){var r=this.subscriptions.get(t);r&&(r.remove(e),this.subscriptions.set(t,r),r.size||this.subscriptions.delete(t))},t.destroy=function(){this.subscriptions=new Map},t}();b.subscriptions=new Map;var v=function(){function t(){}return t.getState=function(t){if(!this._state.get(t))throw Error("No state exists for the name "+t);return this._state.get(t)},t.add=function(t,e){this._state.set(t,e)},t.subscribe=function(t){for(var e,r=this,n=this.subscriptionID.nextID,o=[],u=d(this._state);!(e=u()).done;){var i=e.value;o.push({name:i[0],ID:i[1].subscribe((function(){t(r._state)}))})}return this.subscriptions.set(n,o),n},t.unsubscribe=function(t){var e=this;(this.subscriptions.get(t)||[]).forEach((function(t){var r=t.ID,n=e.getState(t.name);n&&n.unsubscribe(r)}))},t.destroy=function(){this._state=new Map,this.stateUpdateID.destroy(),this.subscriptionID.destroy(),this.subscriptions=new Map,b.destroy()},l(t,null,[{key:"state",get:function(){return this._state}},{key:"allStates",get:function(){return this._state.values()}}]),t}();v._state=new Map,v.stateUpdateID=new y,v.subscriptionID=new y,v.subscriptions=new Map;t.ContextFactory=class{Context;ProviderFactory;constructor(t){if(!v.getState(t))throw Error(`A state fragment by the name of ${t} has not been created yet`);this.Context=i.exports.createContext(v.getState(t).state),this.ProviderFactory=this.createProvider(t)}createProvider(t){const{Context:e}=this;return class extends i.exports.Component{mounted=!0;subscription;constructor(e){super(e),this.state=v.getState(t).state,this.subscription=this.initializeSubscription()}initializeSubscription(){return v.getState(t).subscribe((t=>{this.mounted&&this.setState(t)}))}componentWillUnmount(){this.mounted=!1,this.subscription&&v.getState(t).unsubscribe(this.subscription)}render(){return c.createElement(e.Provider,{value:this.state},this.props.children)}}}},t.useEmpireState=function(t){var e=i.exports.useState(t(v.state)),r=e[0],n=e[1];return i.exports.useEffect((function(){var e=v.subscribe((function(e){n(t(e))}));return function(){return v.unsubscribe(e)}}),[]),r},t.useGalenaMutation=function(t){return v.getState(t).update},t.useGalenaState=function(t,e,r){var n=i.exports.useState(e(v.getState(t).state||r)),o=n[0],u=n[1];return i.exports.useEffect((function(){var r,n=null==(r=v.getState(t))?void 0:r.subscribe((function(t){var r=e(t);r!==o&&u(r)}));return function(){var e;return null==(e=v.getState(t))?void 0:e.unsubscribe(n)}}),[]),o},Object.defineProperty(t,"__esModule",{value:!0})}));
